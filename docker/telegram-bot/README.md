# Telegram Bot ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ Bitrix CDN

ะะฝัะตะปะปะตะบััะฐะปัะฝัะน ะฑะพั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั ะธะฝััะฐััััะบัััะพะน Bitrix CDN ั AI-ะฐะฝะฐะปะธะทะพะผ ะฝะฐ ะฑะฐะทะต GPT-4o.

## ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะญัะพั Telegram ะฑะพั ะฟัะตะดะพััะฐะฒะปัะตั ะบะพะผะฟะปะตะบัะฝัะน ะผะพะฝะธัะพัะธะฝะณ ะธ ัะฟัะฐะฒะปะตะฝะธะต ะฒัะตะผะธ ัะตัะฒะธัะฐะผะธ Bitrix CDN:
- **NGINX** - ะพัะฝะพะฒะฝะพะน ะฒะตะฑ-ัะตัะฒะตั ั ะพะฑัะฐะฑะพัะบะพะน ะธะทะพะฑัะฐะถะตะฝะธะน
- **WebP Converter** - ะฐัะธะฝััะพะฝะฝะฐั ะบะพะฝะฒะตััะฐัะธั ะธะทะพะฑัะฐะถะตะฝะธะน ะฒ WebP/AVIF
- **Redis** - ะบะตัะธัะพะฒะฐะฝะธะต ะผะตัะฐะดะฐะฝะฝัั
- **SSHFS** - ะผะพะฝัะธัะพะฒะฐะฝะธะต ัะฐะนะปะพะฒ ั ัะตัะฒะตัะฐ Bitrix
- **Prometheus** - ัะฑะพั ะผะตััะธะบ ัะพ ะฒัะตั ัะตัะฒะธัะพะฒ
- **Grafana** - ะฒะธะทัะฐะปะธะทะฐัะธั ะผะตััะธะบ ะธ ะดะฐัะฑะพัะดั
- **AlertManager** - ัะฟัะฐะฒะปะตะฝะธะต ะฐะปะตััะฐะผะธ
- **Node Exporter** - ัะธััะตะผะฝัะต ะผะตััะธะบะธ ัะพััะฐ
- **Nginx/Redis Exporters** - ะผะตััะธะบะธ ัะตัะฒะธัะพะฒ

## ะะพะทะผะพะถะฝะพััะธ ะฑะพัะฐ

### ๐ ะะพะฝะธัะพัะธะฝะณ ัะตัะฒะธัะพะฒ
- `/status` - ะะฑัะธะน ััะฐััั ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
- `/containers` - ะะตัะฐะปัะฝัะน ัะฟะธัะพะบ ะฒัะตั ัะตัะฒะธัะพะฒ
- `/health` - Health checks ะฒัะตั ัะตัะฒะธัะพะฒ
- `/nginx` - ะกัะฐัะธััะธะบะฐ Nginx (connections, requests, cache)
- `/redis` - ะะตััะธะบะธ Redis (memory, keys, hit rate)
- `/webp` - ะกัะฐััั WebP ะบะพะฝะฒะตััะตัะฐ (queue, processed files)
- `/cache` - ะกัะฐัะธััะธะบะฐ ะบะตัะธัะพะฒะฐะฝะธั Nginx ะธ Redis

### ๐ค AI-ะฐะฝะฐะปะธะท ั GPT-4o
- `/analyze` - ะะพะผะฟะปะตะบัะฝัะน AI-ะฐะฝะฐะปะธะท ัะพััะพัะฝะธั ัะธััะตะผั
- `/ask [ะฒะพะฟัะพั]` - ะะฐะดะฐัั ะฒะพะฟัะพั ะฑะพัั ะพ ัะธััะตะผะต
- `/trends` - ะะฝะฐะปะธะท ััะตะฝะดะพะฒ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- `/suggest` - ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะพะฟัะธะผะธะทะฐัะธะธ ะพั AI
- `/debug` - ะะตัะฐะปัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ

### ๐ ะััะตัั ะธ ะฐะปะตััั
- `/report` - ะะพะปะฝัะน ะพััะตั ะพ ัะธััะตะผะต
- `/alerts` - ะะบัะธะฒะฝัะต ะฐะปะตััั ะธะท AlertManager
- `/quick` - ะัััััะน ะพะฑะทะพั ะบะปััะตะฒัั ะผะตััะธะบ
- `/summary` - ะกะฒะพะดะบะฐ ะทะฐ ะฟะพัะปะตะดะฝะธะน ัะฐั

### ๐ ะัะพะฐะบัะธะฒะฝัะต ัะฒะตะดะพะผะปะตะฝะธั
- `/subscribe` - ะะพะดะฟะธัะบะฐ ะฝะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธะต ัะฒะตะดะพะผะปะตะฝะธั
- `/unsubscribe` - ะัะฟะธัะบะฐ ะพั ัะฒะตะดะพะผะปะตะฝะธะน
- ะะฒัะพะผะฐัะธัะตัะบะธะต ะฐะปะตััั ะฟัะธ ะบัะธัะธัะตัะบะธั ะฟัะพะฑะปะตะผะฐั
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฟะฐะดะตะฝะธะธ ะบะพะฝัะตะนะฝะตัะพะฒ
- ะะปะตััั ะฟะพ ะผะตััะธะบะฐะผ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

### โน๏ธ ะะพะผะพัั ะธ ะฟะพะดัะบะฐะทะบะธ
- `/help` - ะกะฟะธัะพะบ ะฒัะตั ะบะพะผะฐะฝะด
- `/commands` - ะะฝัะตัะฐะบัะธะฒะฝะฐั ะฟะพะดัะบะฐะทะบะฐ ะบะพะผะฐะฝะด
- `/tips` - ะะพะปะตะทะฝัะต ัะพะฒะตัั ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

## ะััะธัะตะบัััะฐ

### ะะพะฝะธัะพัะธััะตะผัะต ัะตัะฒะธัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     Bitrix CDN Infrastructure                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ   โ
โ  โ  NGINX   โ  โ  Redis   โ  โ  WebP    โ  โ  SSHFS   โ   โ
โ  โ (80/443) โ  โ (6379)   โ  โ (8088)   โ  โ  mount   โ   โ
โ  โโโโโโโฌโโโโโ  โโโโโโโฌโโโโโ  โโโโโโโฌโโโโโ  โโโโโโโโโโโโ   โ
โ        โ             โ             โ                         โ
โ        โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโ                         โ
โ                      โ                                        โ
โ            โโโโโโโโโโโผโโโโโโโโโโ                            โ
โ            โ   Prometheus      โโโโโโ Exporters             โ
โ            โ     (9090)        โ      (nginx, redis, node)  โ
โ            โโโโโโโโโโโฌโโโโโโโโโโ                            โ
โ                      โ                                        โ
โ         โโโโโโโโโโโโโโดโโโโโโโโโโโโโ                         โ
โ         โ                         โ                          โ
โ    โโโโโโผโโโโโ             โโโโโโโผโโโโโโโ                  โ
โ    โ Grafana โ             โAlertManagerโ                   โ
โ    โ (3000)  โ             โ   (9093)   โ                   โ
โ    โโโโโโโโโโโ             โโโโโโโฌโโโโโโโ                   โ
โ                                   โ                          โ
โ                          โโโโโโโโโโผโโโโโโโโโ                โ
โ                          โ Telegram Bot    โ                โ
โ                          โ  + GPT-4o AI    โ                โ
โ                          โโโโโโโโโโโโโโโโโโโ                โ
โ                                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพะผะฟะพะฝะตะฝัั ะฑะพัะฐ

```
telegram-bot/
โโโ bot/
โ   โโโ main.py              # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ handlers.py          # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด (1400+ ัััะพะบ)
โ   โโโ ai_analyzer.py       # AI-ะฐะฝะฐะปะธะท ั GPT-4o
โ   โโโ docker_client.py     # ะะทะฐะธะผะพะดะตะนััะฒะธะต ั Docker API
โ   โโโ prometheus_client.py # ะะพะปััะตะฝะธะต ะผะตััะธะบ ะธะท Prometheus
โ   โโโ alerts.py            # ะะฐะฑะพัะฐ ั AlertManager
โ   โโโ notifications.py     # ะัะพะฐะบัะธะฒะฝัะต ัะฒะตะดะพะผะปะตะฝะธั
โ   โโโ models.py            # ะะพะดะตะปะธ ะดะฐะฝะฝัั (Pydantic)
โ   โโโ config_loader.py     # ะะฐะณััะทะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
โ   โโโ utils.py             # ะฃัะธะปะธัั
โโโ config.yml               # ะะพะฝัะธะณััะฐัะธั ะฑะพัะฐ
โโโ requirements.txt         # ะะฐะฒะธัะธะผะพััะธ
โโโ Dockerfile              # Docker ะพะฑัะฐะท
โโโ README.md               # ะญัะฐ ะดะพะบัะผะตะฝัะฐัะธั
```

## ะฃััะฐะฝะพะฒะบะฐ ะธ ะฝะฐัััะพะนะบะฐ

### 1. ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# OpenAI API (ะดะปั AI-ะฐะฝะฐะปะธะทะฐ)
OPENAI_API_KEY=your_openai_api_key_here

# Redis (ะธัะฟะพะปัะทัะตััั ะฑะพัะพะผ)
REDIS_PASSWORD=bitrix_cdn_secure_2024

# ะะปั Netdata (ะพะฟัะธะพะฝะฐะปัะฝะพ)
NETDATA_CLAIM_TOKEN=your_netdata_token
NETDATA_CLAIM_ROOMS=your_room_id
```

### 2. ะะพะปััะตะฝะธะต Telegram Bot Token

1. ะะฐะฟะธัะธัะต [@BotFather](https://t.me/BotFather) ะฒ Telegram
2. ะัะฟัะฐะฒััะต `/newbot`
3. ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะธ ะฟะพะปััะธัะต ัะพะบะตะฝ
4. ะะพะฑะฐะฒััะต ัะพะบะตะฝ ะฒ `.env`

### 3. ะะพะปััะตะฝะธะต OpenAI API Key

1. ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ [platform.openai.com](https://platform.openai.com/)
2. ะกะพะทะดะฐะนัะต API key ะฒ ัะฐะทะดะตะปะต API Keys
3. ะะพะฑะฐะฒััะต ะบะปัั ะฒ `.env`
4. ะฃะฑะตะดะธัะตัั, ััะพ ั ะฒะฐั ะตััั ะดะพัััะฟ ะบ GPT-4o

### 4. ะะพะฝัะธะณััะฐัะธั ะฑะพัะฐ

ะััะตะดะฐะบัะธััะนัะต `docker/telegram-bot/config.yml`:

```yaml
telegram:
  token: "${TELEGRAM_BOT_TOKEN}"
  allowed_users: [142636541]  # ะะฐั Telegram user ID
  allowed_groups: []           # ID ัะฐะทัะตัะตะฝะฝัั ะณััะฟะฟ
  admin_users: [142636541]     # ะะดะผะธะฝะธัััะฐัะพัั

prometheus:
  url: "http://prometheus:9090"

docker:
  socket: "/var/run/docker.sock"

openai:
  api_key: "${OPENAI_API_KEY}"
  model: "gpt-4o"  # ะัะฟะพะปัะทัะตััั GPT-4o

alertmanager:
  url: "http://alertmanager:9093"

notifications:
  enabled: true
  check_interval: 60  # ะัะพะฒะตัะบะฐ ะบะฐะถะดัะต 60 ัะตะบัะฝะด
  critical_only: false

services:
  - name: nginx
    container: cdn-nginx
  - name: redis
    container: cdn-redis
  - name: webp-converter
    container: cdn-webp-converter-async
  - name: sshfs
    container: cdn-sshfs
  - name: prometheus
    container: cdn-prometheus
  - name: grafana
    container: cdn-grafana
  - name: alertmanager
    container: cdn-alertmanager
  - name: node-exporter
    container: cdn-node-exporter
  - name: nginx-exporter
    container: cdn-nginx-exporter
  - name: redis-exporter
    container: cdn-redis-exporter
```

### 5. ะฃะทะฝะฐัั ัะฒะพะน Telegram User ID

ะัะฟัะฐะฒััะต ะปัะฑะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั [@userinfobot](https://t.me/userinfobot) ะธ ัะบะพะฟะธััะนัะต ะฒะฐั ID.

### 6. ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ

```bash
# ะกะฑะพัะบะฐ ะฑะพัะฐ
docker compose build telegram-bot

# ะะฐะฟััะบ ะฑะพัะฐ
docker compose up -d telegram-bot

# ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ
docker compose logs -f telegram-bot
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะตัะฒัะน ะทะฐะฟััะบ

1. ะะฐะนะดะธัะต ะฒะฐัะตะณะพ ะฑะพัะฐ ะฒ Telegram ะฟะพ username
2. ะัะฟัะฐะฒััะต `/start`
3. ะะพั ะฟัะพะฒะตัะธั ะฐะฒัะพัะธะทะฐัะธั (ะฟะพ User ID ะธะท config.yml)
4. ะัะฟะพะปัะทัะนัะต `/commands` ะดะปั ัะฟะธัะบะฐ ะดะพัััะฟะฝัั ะบะพะผะฐะฝะด

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```
/start       - ะะฐะฟััะบ ะฑะพัะฐ ะธ ะฟัะธะฒะตัััะฒะธะต
/help        - ะะพะปะฝัะน ัะฟะธัะพะบ ะบะพะผะฐะฝะด
/commands    - ะะฝัะตัะฐะบัะธะฒะฝะฐั ะฟะพะดัะบะฐะทะบะฐ

๐ ะะพะฝะธัะพัะธะฝะณ:
/status      - ะกัะฐััั ะฒัะตั ัะตัะฒะธัะพะฒ
/containers  - ะกะฟะธัะพะบ ะบะพะฝัะตะนะฝะตัะพะฒ
/health      - Health checks
/nginx       - ะะตััะธะบะธ Nginx
/redis       - ะกัะฐัะธััะธะบะฐ Redis
/webp        - WebP ะบะพะฝะฒะตััะตั
/cache       - ะกัะฐัะธััะธะบะฐ ะบะตัะฐ

๐ค AI-ะะฝะฐะปะธะท:
/analyze     - ะะฝะฐะปะธะท ัะธััะตะผั ั GPT-4o
/ask         - ะะฐะดะฐัั ะฒะพะฟัะพั ะฑะพัั
/trends      - ะะฝะฐะปะธะท ััะตะฝะดะพะฒ
/suggest     - ะะตะบะพะผะตะฝะดะฐัะธะธ

๐ ะััะตัั:
/report      - ะะพะปะฝัะน ะพััะตั
/alerts      - ะะบัะธะฒะฝัะต ะฐะปะตััั
/quick       - ะัััััะน ะพะฑะทะพั

๐ ะฃะฒะตะดะพะผะปะตะฝะธั:
/subscribe   - ะะพะดะฟะธัะบะฐ
/unsubscribe - ะัะฟะธัะบะฐ
```

### ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

**ะัะพะฒะตัะบะฐ ััะฐัััะฐ ัะธััะตะผั:**
```
/status
```
ะะพะปััะธัะต ะบัะฐัะบะธะน ะพะฑะทะพั ะฒัะตั ัะตัะฒะธัะพะฒ: ะบะฐะบะธะต ัะฐะฑะพัะฐัั, ะบะฐะบะธะต ะพััะฐะฝะพะฒะปะตะฝั.

**AI-ะฐะฝะฐะปะธะท ะฟัะพะฑะปะตะผ:**
```
/analyze
```
ะะพั ัะพะฑะตัะตั ะฒัะต ะผะตััะธะบะธ, ะฟัะพะฐะฝะฐะปะธะทะธััะตั ะธั ั ะฟะพะผะพััั GPT-4o ะธ ะฟัะตะดะพััะฐะฒะธั:
- ะะฑัะธะน ััะฐััั (healthy/warning/critical)
- ะัะตะฝะบั ะทะดะพัะพะฒัั ัะธััะตะผั (0-100)
- ะะฑะฝะฐััะถะตะฝะฝัะต ะฟัะพะฑะปะตะผั
- ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ััััะฐะฝะตะฝะธั
- ะัะพะณะฝะพะท ะฒะพะทะผะพะถะฝัั ะฟัะพะฑะปะตะผ

**ะะฐะดะฐัั ะฒะพะฟัะพั ะฑะพัั:**
```
/ask ะะพัะตะผั ัะฐััะตั ะฟะฐะผััั Redis?
```
ะะพั ะฟัะพะฐะฝะฐะปะธะทะธััะตั ัะตะบััะตะต ัะพััะพัะฝะธะต Redis ะธ ะพัะฒะตัะธั ะฝะฐ ะฒะฐั ะฒะพะฟัะพั.

**ะะพะดะฟะธัะฐัััั ะฝะฐ ัะฒะตะดะพะผะปะตะฝะธั:**
```
/subscribe
```
ะขะตะฟะตัั ะฒั ะฑัะดะตัะต ะฟะพะปััะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธะต ัะฒะตะดะพะผะปะตะฝะธั ะพ:
- ะัะธัะธัะตัะบะธั ะฟัะพะฑะปะตะผะฐั
- ะััะฐะฝะพะฒะบะต ะบะพะฝัะตะนะฝะตัะพะฒ
- ะัะพะฑะปะตะผะฐั ั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั
- ะะปะตััะฐั ะธะท AlertManager

## ะะพะฝะธัะพัะธะฝะณ ัะตัะฒะธัะพะฒ

### NGINX (cdn-nginx)

ะะตััะธะบะธ:
- ะะบัะธะฒะฝัะต ัะพะตะดะธะฝะตะฝะธั
- ะะฐะฟัะพัั ะฒ ะผะธะฝััั
- Cache hit rate
- Upstream response time
- Memory usage

ะัะพะฒะตัะบะฐ: `/nginx`

### Redis (cdn-redis)

ะะตััะธะบะธ:
- ะัะฟะพะปัะทัะตะผะฐั ะฟะฐะผััั
- ะะพะปะธัะตััะฒะพ ะบะปััะตะน
- Hit/Miss rate
- ะะพะดะบะปััะตะฝะฝัะต ะบะปะธะตะฝัั
- ะะฟะตัะฐัะธะน ะฒ ัะตะบัะฝะดั

ะัะพะฒะตัะบะฐ: `/redis`

### WebP Converter (cdn-webp-converter-async)

ะะตััะธะบะธ:
- ะะฐะทะผะตั ะพัะตัะตะดะธ
- ะะฑัะฐะฑะพัะฐะฝะฝัะต ัะฐะนะปั
- ะัะธะฑะบะธ ะบะพะฝะฒะตััะฐัะธะธ
- ะัะตะผั ะพะฑัะฐะฑะพัะบะธ
- Memory usage

ะัะพะฒะตัะบะฐ: `/webp`

### SSHFS (cdn-sshfs)

ะัะพะฒะตัะบะฐ:
- ะกัะฐััั ะผะพะฝัะธัะพะฒะฐะฝะธั
- ะะพัััะฟะฝะพััั ัะดะฐะปะตะฝะฝะพะณะพ ัะตัะฒะตัะฐ
- ะัะพะฑะปะตะผั ั SSH ะฟะพะดะบะปััะตะฝะธะตะผ

ะัะพะฒะตัะบะฐ: `/containers`

### Prometheus (cdn-prometheus)

ะกะฑะพั ะผะตััะธะบ ัะพ ะฒัะตั exporters:
- nginx-exporter (ะฟะพัั 9113)
- redis-exporter (ะฟะพัั 9121)
- node-exporter (ะฟะพัั 9100)
- webp-converter (ะฟะพัั 9101)

ะะพัััะฟ: http://localhost:9090

### AlertManager (cdn-alertmanager)

ะฃะฟัะฐะฒะปะตะฝะธะต ะฐะปะตััะฐะผะธ:
- ะะพะปััะตะฝะธะต ะฐะบัะธะฒะฝัั ะฐะปะตััะพะฒ
- ะกะพะทะดะฐะฝะธะต silences
- Webhook ัะฒะตะดะพะผะปะตะฝะธั

ะัะพะฒะตัะบะฐ: `/alerts`

## AI-ะฐะฝะฐะปะธะท ะธ ัะตะบะพะผะตะฝะดะฐัะธะธ

ะะพั ะธัะฟะพะปัะทัะตั **GPT-4o** ะดะปั ะธะฝัะตะปะปะตะบััะฐะปัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ ัะธััะตะผั.

### ะงัะพ ะฐะฝะฐะปะธะทะธััะตั AI:

1. **ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ**
   - ะะฐะฑะพัะฐััะธะต/ะพััะฐะฝะพะฒะปะตะฝะฝัะต ัะตัะฒะธัั
   - Health checks
   - ะัะพะฑะปะตะผั ั ะทะฐะฟััะบะพะผ

2. **ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ**
   - ะะฐะณััะทะบะฐ ะฝะฐ Nginx
   - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ Redis
   - ะะฐะทะผะตั ะพัะตัะตะดะธ WebP ะบะพะฝะฒะตััะตัะฐ
   - ะกะธััะตะผะฝัะต ะผะตััะธะบะธ (CPU, RAM, Disk)

3. **ะัะพะฑะปะตะผั ะธ ะฐะฝะพะผะฐะปะธะธ**
   - ะััะพะบะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
   - ะัะธะฑะบะธ ะฒ ะปะพะณะฐั
   - ะัะพะฑะปะตะผั ั ะบะตัะธัะพะฒะฐะฝะธะตะผ
   - ะะตะดะปะตะฝะฝัะต ะทะฐะฟัะพัั

4. **ะะตะบะพะผะตะฝะดะฐัะธะธ**
   - ะะฟัะธะผะธะทะฐัะธั ะบะพะฝัะธะณััะฐัะธะธ
   - ะะฐัััะพะนะบะฐ ะบะตัะธัะพะฒะฐะฝะธั
   - ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ัะตััััะพะฒ
   - ะัะตะดะพัะฒัะฐัะตะฝะธะต ะฟัะพะฑะปะตะผ

## ะะตะทะพะฟะฐัะฝะพััั

### ะะฒัะพัะธะทะฐัะธั

ะะพัััะฟ ะบ ะฑะพัั ะพะณัะฐะฝะธัะตะฝ ะฒ `config.yml`:

```yaml
telegram:
  allowed_users: [142636541, 987654321]  # ะกะฟะธัะพะบ User ID
  admin_users: [142636541]               # ะะดะผะธะฝะธัััะฐัะพัั
```

ะขะพะปัะบะพ ัะบะฐะทะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัั ะฑะพัะฐ.

### ะัะฐะฒะฐ ะดะพัััะฟะฐ

- ะะพั ะธะผะตะตั ะดะพัััะฟ ะบ Docker socket (read-only)
- ะะพัััะฟ ะบ Prometheus (read-only)
- ะะพัััะฟ ะบ AlertManager (read + create silences)
- OpenAI API key ััะฐะฝะธััั ะฒ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

### ะะตะบะพะผะตะฝะดะฐัะธะธ

1. ะะต ะฟัะฑะปะธะบัะนัะต ัะพะบะตะฝั ะฒ ัะตะฟะพะทะธัะพัะธะธ
2. ะัะฟะพะปัะทัะนัะต `.env` ะดะปั ััะฒััะฒะธัะตะปัะฝัั ะดะฐะฝะฝัั
3. ะะณัะฐะฝะธัััะต ัะฟะธัะพะบ `allowed_users`
4. ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ะฑะพัะฐ ะธ ะทะฐะฒะธัะธะผะพััะธ

## Troubleshooting

### ะะพั ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัััะต ะปะพะณะธ
docker compose logs telegram-bot

# ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
docker compose exec telegram-bot env | grep -E "TELEGRAM|OPENAI"

# ะัะพะฒะตัััะต ะบะพะฝัะธะณััะฐัะธั
docker compose exec telegram-bot cat /app/config.yml
```

### ะะพั ะฝะต ะพัะฒะตัะฐะตั ะฝะฐ ะบะพะผะฐะฝะดั

1. ะัะพะฒะตัััะต, ััะพ ะฒะฐั User ID ะฒ `allowed_users`
2. ะฃะฑะตะดะธัะตัั, ััะพ ะฑะพั ะทะฐะฟััะตะฝ: `docker compose ps telegram-bot`
3. ะัะพะฒะตัััะต ัะตัะตะฒะพะต ะฟะพะดะบะปััะตะฝะธะต ะบ Docker socket

### AI-ะฐะฝะฐะปะธะท ะฝะต ัะฐะฑะพัะฐะตั

1. ะัะพะฒะตัััะต OPENAI_API_KEY
2. ะฃะฑะตะดะธัะตัั, ััะพ ั ะฒะฐั ะตััั ะดะพัััะฟ ะบ GPT-4o
3. ะัะพะฒะตัััะต ะฑะฐะปะฐะฝั ะฒ OpenAI ะฐะบะบะฐัะฝัะต
4. ะะพัะผะพััะธัะต ะปะพะณะธ: `docker compose logs telegram-bot | grep -i openai`

### ะะตััะธะบะธ ะฝะต ะพัะพะฑัะฐะถะฐัััั

1. ะฃะฑะตะดะธัะตัั, ััะพ Prometheus ะทะฐะฟััะตะฝ: `docker compose ps prometheus`
2. ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั: `curl http://localhost:9090/api/v1/status`
3. ะัะพะฒะตัััะต exporters: `docker compose ps | grep exporter`

## ะะฑะฝะพะฒะปะตะฝะธะต

```bash
# ะััะฐะฝะพะฒะธัั ะฑะพัะฐ
docker compose stop telegram-bot

# ะะฑะฝะพะฒะธัั ะบะพะด
git pull origin main

# ะะตัะตัะพะฑัะฐัั ะพะฑัะฐะท
docker compose build telegram-bot

# ะะฐะฟัััะธัั ะฑะพัะฐ
docker compose up -d telegram-bot

# ะัะพะฒะตัะธัั ะปะพะณะธ
docker compose logs -f telegram-bot
```

## ะะธัะตะฝะทะธั ะธ ะบะพะฝัะฐะบัั

**ะะฒัะพั**: Chibilyaev Alexandr
**Email**: info@aachibilyaev.com
**ะะพะผะฟะฐะฝะธั**: AAChibilyaev LTD

**ะัะพะตะบั**: Bitrix CDN Monitoring Bot
**ะะตััะธั**: 2.0.0
**ะะฐัะฐ**: 2025-01-22

---

**Powered by:**
- Python 3.12
- python-telegram-bot 21.7
- OpenAI GPT-4o
- Docker API
- Prometheus
- Redis

Made with โค๏ธ for Bitrix CDN infrastructure monitoring
