# –£–º–Ω–∞—è WebP –ª–æ–≥–∏–∫–∞ - –û—Ç—á–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üß† –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ WebP –æ—Ç–¥–∞—á–∏

NGINX —Ç–µ–ø–µ—Ä—å **–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π —Ñ–∞–π–ª –æ—Ç–¥–∞–≤–∞—Ç—å:

### ‚úÖ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebP –±—Ä–∞—É–∑–µ—Ä–æ–º**
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept: image/webp`
   - –ï—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ‚Üí –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–¥–∞—Ç—å WebP
   - –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ‚Üí –æ—Ç–¥–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è WebP —Ñ–∞–π–ª–∞**
   - –ï—Å–ª–∏ WebP —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –æ—Ç–¥–∞–µ—Ç WebP
   - –ï—Å–ª–∏ WebP —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Üí –æ—Ç–¥–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª
   - –ï—Å–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí 404

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –ë—Ä–∞—É–∑–µ—Ä | –ó–∞–≥–æ–ª–æ–≤–æ–∫ Accept | –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | Content-Type |
|---------|------------------|--------------|--------------|
| –°—Ç–∞—Ä—ã–π  | `image/jpeg`     | 630KB        | `image/jpeg` |
| –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π | `image/webp` | 88KB         | `image/webp` |

**–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞: 86%!** üöÄ

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```nginx
# –£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ WebP –ø–æ–¥–¥–µ—Ä–∂–∫–∏
map $http_accept $webp_suffix {
    default "";
    "~*image/webp" ".webp";
}

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Content-Type
map $uri $image_content_type {
    default "image/jpeg";
    "~*\.webp$" "image/webp";
    "~*\.jpg$" "image/jpeg";
    "~*\.png$" "image/png";
}

# –£–º–Ω–∞—è –æ—Ç–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤
try_files $uri$webp_suffix $uri =404;
```

### üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç WebP
   - –°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª
   - –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º

2. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 1 –≥–æ–¥
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
   - Graceful degradation
   - –ù–∏–∫–∞–∫–∏—Ö —Å–±–æ–µ–≤

### üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ WebP –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞:**

- **–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 37 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ü—Ä–æ–ø—É—â–µ–Ω–æ**: 21,231 (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
- **–û—à–∏–±–æ–∫**: 0
- **–°–∂–∞—Ç–∏–µ**: 88% —ç–∫–æ–Ω–æ–º–∏–∏
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**: < 0.5 —Å–µ–∫

### üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:**

‚úÖ –£–º–Ω–∞—è WebP –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ  
‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞  
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –∑–¥–æ—Ä–æ–≤—ã  

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏!** üéâ
