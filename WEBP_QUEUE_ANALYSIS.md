# –ê–Ω–∞–ª–∏–∑ WebP Queue - –ü–æ—á–µ–º—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0 –≤ Prometheus

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:**

### ‚úÖ **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:**

1. **WebP –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ**:
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 7,078 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ü—Ä–æ–ø—É—â–µ–Ω–æ: 2,981,606 (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
   - –û—á–µ—Ä–µ–¥—å: 1000/1000 (–ø–æ–ª–Ω–∞—è)

2. **–û—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞**:
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1000 —Ñ–∞–π–ª–æ–≤
   - –¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä: 1000 —Ñ–∞–π–ª–æ–≤
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è: 4 —Ñ–∞–π–ª–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### ü§î **–ü–æ—á–µ–º—É –≤ Prometheus –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0:**

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫**:
   - Prometheus –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–±–æ–∏**:
   - –ö—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–µ—Ç—Ä–∏–∫
   - –ü—Ä–æ–±–ª–µ–º—ã —Å scrape –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus**:
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π scrape –∏–Ω—Ç–µ—Ä–≤–∞–ª
   - –ü—Ä–æ–±–ª–µ–º—ã —Å target discovery

### üìä **–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø—Ä—è–º–æ –∏–∑ —Å–µ—Ä–≤–∏—Å–∞):**

```json
{
  "queue": {
    "pending_count": 1000,
    "max_size": 1000
  },
  "processing": {
    "count": 4
  },
  "stats": {
    "total_processed": 6520,
    "total_errors": 4,
    "total_skipped": 2730139,
    "processing_rate": 31.54
  }
}
```

### üö® **–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å:**

1. **–û—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞**:
   - –ù—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `WEBP_MAX_QUEUE_SIZE`
   - –ò–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker'–æ–≤

2. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - 4 worker'–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç 1000 —Ñ–∞–π–ª–æ–≤
   - –°–∫–æ—Ä–æ—Å—Ç—å: 31.54 —Ñ–∞–π–ª–∞/—Å–µ–∫

### üîß **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

1. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏**:
   ```yaml
   - WEBP_MAX_QUEUE_SIZE=5000
   ```

2. **–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker'–æ–≤**:
   ```yaml
   - WEBP_WORKER_THREADS=8
   ```

3. **–£–≤–µ–ª–∏—á–∏—Ç—å rate limit**:
   ```yaml
   - WEBP_RATE_LIMIT=200
   ```

### ‚úÖ **–í—ã–≤–æ–¥:**

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –û—á–µ—Ä–µ–¥—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1000, –∞ –Ω–µ 0. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞:
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Prometheus
- –î—Ä—É–≥—É—é –º–µ—Ç—Ä–∏–∫—É
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**WebP –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã!** üöÄ
