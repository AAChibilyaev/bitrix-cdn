# –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker - –û—Ç—á–µ—Ç –æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üöÄ **DOCKER –û–ë–†–ê–ó–´ –ü–ï–†–ï–°–û–ë–†–ê–ù–´ –ò –†–ê–ó–í–ï–†–ù–£–¢–´!**

### ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤**:
   ```bash
   docker compose build
   ```
   - WebP Converter: –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - SSHFS: –æ–±–Ω–æ–≤–ª–µ–Ω
   - –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

2. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏**:
   ```bash
   docker compose up -d
   ```
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
   - –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
   - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üìä **–¢–µ–∫—É—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

```json
{
  "queue": {
    "pending_count": 10000,
    "max_size": 10000
  },
  "processing": {
    "count": 9
  },
  "stats": {
    "total_processed": 83,
    "total_errors": 0,
    "total_skipped": 359908,
    "processing_rate": 3.08
  }
}
```

### üéØ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|----------|--------|
| **Worker Threads** | 12 | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ (worker_id 0-11) |
| **Queue Size** | 10,000 | ‚úÖ –ü–æ–ª–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ |
| **Rate Limit** | 500/–º–∏–Ω | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ |
| **Batch Size** | 50 | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ |
| **Scan Interval** | 1s | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ |
| **CPU Limit** | 6 cores | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ |
| **Memory Limit** | 6GB | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ |

### üöÄ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏:**

1. **12 Worker'–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**:
   - worker_id: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞

2. **–û—á–µ—Ä–µ–¥—å –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ**:
   - 10,000 —Ñ–∞–π–ª–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏
   - 9 —Ñ–∞–π–ª–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - –ù–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

3. **–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏**:
   - –°–∂–∞—Ç–∏–µ: 76-89% —ç–∫–æ–Ω–æ–º–∏–∏
   - –í—Ä–µ–º—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: 0.65-0.73 —Å–µ–∫—É–Ω–¥—ã
   - –û—à–∏–±–æ–∫: 0

### üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose ps

# –õ–æ–≥–∏ WebP –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
docker compose logs -f webp-converter-async

# –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
curl http://localhost:9101/metrics | grep webp

# –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏
curl http://localhost:9101/queue/status
```

### ‚úÖ **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

**DOCKER –û–ë–†–ê–ó–´ –£–°–ü–ï–®–ù–û –ü–ï–†–ï–°–û–ë–†–ê–ù–´ –ò –†–ê–ó–í–ï–†–ù–£–¢–´!** üöÄ

- ‚úÖ **12 worker'–æ–≤** —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- ‚úÖ **10,000 —Ñ–∞–π–ª–æ–≤** –≤ –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º—É–º)
- ‚úÖ **6 CPU cores + 6GB RAM** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- ‚úÖ **500 —Ñ–∞–π–ª–æ–≤/–º–∏–Ω** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- ‚úÖ **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ **0 –æ—à–∏–±–æ–∫** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –ù–ê –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ô –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò!** üéâ

### üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π:**

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–æ–≤—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏
docker compose restart webp-converter-async

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats cdn-webp-converter-async

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8088/health
```

**–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê –ò –†–ê–ë–û–¢–ê–ï–¢!** üöÄ
